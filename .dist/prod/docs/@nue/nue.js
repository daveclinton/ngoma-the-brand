function I(d){let{root:u,fn:$,fns:v,deps:T,ctx:C}=d;var g,f,a,h,w,j,p=[];function A(i){return new Proxy({},{get(m,s){if(j){let c=h.indexOf(s);if(c>=0)return i[c]}return s===h?i:h.includes(s)?i[s]:s==w?a.indexOf(i):C[s]}})}function y(i,m,s,c){let l=_({fns:v,dom:u.cloneNode(!0)},A(i),T,C);p[c?"unshift":"push"](l),l.before(c||g),C.oninsert?.call(C,l.$el,i,{index:m,is_repaint:!!s,is_first:!m,is_last:m==a.length-1,items:a})}function O(){p.forEach((i)=>i.unmount()),p=[],a.forEach(y)}function N(i){let{unshift:m,splice:s,push:c,sort:l,reverse:e}=i;return Object.assign(i,{push(t){c.call(a,t),y(t,a.length-1)},unshift(t){m.call(a,t),y(t,0,null,p[0].$el)},sort(t){l.call(a,t),O()},reverse(){e.call(a),O()},splice(t,n){p.slice(t,t+n).forEach((r)=>r.unmount()),p.splice(t,n),s.call(a,t,n)},shift(){i.splice(0,1)},pop(){i.splice(i.length-1,1)},remove(t){let n=a.indexOf(t);if(n>=0)i.splice(n,1)}})}function M(){var i;if([h,i=[],w,j]=$(C),a){if(i!==f)a=N(i),O(),f=i;return p.forEach((m)=>m.update())}if(i){let m=u.parentElement;g=new Text(""),m.insertBefore(g,u),m.removeChild(u),a=N(i),i.forEach(y),f=i}}return{update:M}}function J(d){let{root:u,fn:$,fns:v,deps:T,ctx:C}=d,g=[];var f=u,a,h;function w(p,A){d.processAttrs(p);let y=_({fns:v,dom:p},C,T,C);g.push(y),y.fn=A}w(u,$);while(f=f.nextElementSibling){let p=f.getAttribute(":else-if");if(p)w(f,v[p]),f.removeAttribute(":else-if");else if(f.hasAttribute(":else"))w(f,()=>!0),f.removeAttribute(":else");else{h=f;break}}function j(){if(!a){let A=u.parentElement;a=new Text(""),A.insertBefore(a,u)}let p=g.find((A)=>A.fn(C));g.forEach((A)=>A==p?A.before(a):A.unmount())}return{update:j,next:h}}var W={":if":J,":for":I},k=["class","style","id"];function _(d,u={},$=[],v={}){let{Impl:T,tmpl:C,fns:g=[],dom:f,inner:a}=d,h=[];function w(e){let t=e.nodeType;if(t==3){let[n,r]=/:(\d+):/.exec(e.textContent.trim())||[],o=g[r];if(o)h.push((b)=>e.textContent=G(o(l)))}if(t==1){for(let b in W){let x=g[e.getAttribute(b)];if(b==":if"&&x&&e.getAttribute(":for"))if(x(l))continue;else e.removeAttribute(":for");if(x){e.removeAttribute(b);let E=W[b]({root:e,fn:x,fns:g,deps:$,ctx:l,processAttrs:j});return h.push(E.update),E}}let n=e.tagName.toLowerCase(),r=e.nextSibling;if(a&&n=="slot")return a.replace(e),{next:r};let o=$.find((b)=>b.name==n);if(o){if(e.firstChild){let E=document.createElement("_");E.append(...e.childNodes),o.inner=_({fns:g,dom:E},l,$)}let b=M(e),x=_(o,l,$,b).mount(e);if(f?.tagName.toLowerCase()==o.name)c.$el=x.$el;return h.push((E)=>i(x.$el,b)),c.$refs[e.getAttribute("ref")||n]=x.impl,{next:r}}else j(e),y(e,w)}}function j(e){for(let t of[...e.attributes])A(e,t.name,t.value)}function p(e,t,n){if(e.getAttribute(t)!==n)e.setAttribute(t,n)}function A(e,t,n){if(t=="ref"||t=="name")c.$refs[n]=e;let r=g[n];if(!r)return;let o=t.slice(1),b=t[0];if(":@$".includes(b))e.removeAttribute(t);if(o=="attr")return h.push((x)=>{for(let[E,B]of Object.entries(r(l)))p(e,E,B===!0?"":B)});if(b==":"){if(o!="bind")h.push((x)=>{let E=r(l);p(e,o,G(E))})}else if(b=="@")e[`on${o}`]=(x)=>{r.call(l,l,x),(v?.update||m)()};else if(b=="$")h.push((x)=>{if(!(e[o]=!!r(l)))e.removeAttribute(o)});if(o=="html")h.push((x)=>e.innerHTML=r(l))}function y(e,t){let n=e.firstChild;while(n)n=t(n)?.next||n.nextSibling}function O(e,t){let n=e.getAttribute(":"+t),r=g[n];return r?r(l):l[n]||e.getAttribute(t)||e[t]||void 0}function N(e){let t={};for(let n of[...e.attributes]){let r=n.name.replace(":",""),o=O(e,r);if(!k.includes(r)&&typeof o!="object")t[r]=o==null?!0:o}return t}function M(e){return e.$attrs=N(e),new Proxy(e,{get(t,n){return O(e,n)}})}function i(e,t){let n=F(O(e,"class")||[],t.class);if(n[0])p(e,"class",G(n," "));let{id:r,style:o}=t;if(o&&o.x!="")e.style=G(o);if(r)e.id=G(r)}function m(e){if(e)Object.assign(s,e);return h.map((t)=>t()),s.updated?.call(l,l),c}let s={},c={update:m,$el:f,get root(){return c.$el},$refs:{},$parent:v,impl:s,mountChild(e,t,n){let r=$.find((o)=>o.name==e);if(r)_(r,n,$,l).mount(t)},mount(e){let t=f||(c.$el=D(C)),n=e.querySelector("script");if(n)Object.assign(u,JSON.parse(n.textContent)),e.insertAdjacentElement("afterend",n);if(T)s=c.impl=new T(l);s.mountChild=c.mountChild,s.$refs=c.$refs,s.update=m,w(t),e.replaceWith(t);for(let r of[...e.attributes])p(t,r.name,r.value);return s.mounted?.call(l,l),m()},append(e){let t=document.createElement("_");return e.append(t),c.mount(t)},replace(e){w(f),e.replaceWith(...f.children),m()},before(e){if(f){if(c.$el=f,!document.body.contains(f))e.before(f);if(!f.walked)w(f),f.walked=1;return m()}},unmount(){try{c.root.remove()}catch(e){}s.unmounted?.call(l,l),m()}},l=new Proxy({},{get(e,t){for(let n of[c,s,u,v,v.bind]){let r=n&&n[t];if(r!=null)return r}},set(e,t,n){if(v&&v[t]!==void 0)v[t]=n,v.update();else if(Object.prototype.hasOwnProperty.call(s,t))s[t]=n;else c[t]=n;return!0}});return c}function D(d){let u=document.createElement("_");return u.innerHTML=d.trim(),u.firstChild}function G(d,u=""){return d?.join?d.filter(($)=>$||$===0).join(u).trim().replace(/\s+/g," "):d||""}function F(d,u){if(d==u)return[d];if(!d.join)d=[d];if(u&&!u.join)u=[u];return d.concat(u)}export{_ as default,_ as createApp};
